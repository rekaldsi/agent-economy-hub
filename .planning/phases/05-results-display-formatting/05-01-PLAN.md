# Phase 5 Plan 1: Results Display & Formatting

<objective>
Transform raw JSON output display into rich, formatted result presentation for both text and image services. Format text results with proper structure, display images with <img> tags, add loading states, empty states, and error handling in the UI.
</objective>

<execution_context>
## What We're Building

**Core Feature**: Rich result display for AI-generated content (text + images)

**Current State** (from Phase 4):
- ‚úÖ Text services generate structured JSON (ideas, concepts, reports, etc.)
- ‚úÖ Image services generate image URLs
- ‚úÖ Both stored in `jobs.output_data` (JSONB)
- ‚ùå Results displayed as raw JSON dump in <pre> tags
- ‚ùå Images show URLs as text, not rendered
- ‚ùå No loading states during processing
- ‚ùå No empty states for jobs without results

**Current Display** (src/hub.js:1409-1413):
```javascript
const outputHtml = job.output_data
  ? '<div class="job-section"><h3>‚úÖ Result</h3><pre style="white-space: pre-wrap; font-family: inherit;">' +
    (typeof job.output_data === 'string' ? job.output_data : JSON.stringify(job.output_data, null, 2)) +
    '</pre></div>'
  : '<div class="job-section" style="text-align: center; padding: 48px;"><p style="color: var(--text-muted);">‚è≥ Waiting for result...</p></div>';
```

**Target State**:
```
Text Services (brainstorm, research, etc.):
  ‚Üí Display structured fields (ideas, findings, recommendations)
  ‚Üí Format lists and bullet points
  ‚Üí Preserve line breaks and formatting

Image Services (image_generate, image_portrait, etc.):
  ‚Üí Display images with <img> tags
  ‚Üí Show thumbnails with click-to-expand
  ‚Üí Download button for images

All Services:
  ‚Üí Loading states while processing
  ‚Üí Empty states for no results
  ‚Üí Error states with clear messages
  ‚Üí Skeleton loaders during AI generation
```

**Success**: User sees beautifully formatted results, not raw JSON
</execution_context>

<context>
## Project Context

**Tech Stack**:
- Frontend: Server-rendered HTML (no React/Vue)
- Styling: Inline CSS with CSS variables
- JavaScript: Vanilla JS (no frameworks)
- Backend: Express serving HTML

**Output Data Formats**:

**Text Services** (17 services):
```javascript
// Brainstorm
{ ideas: [{angle: "...", idea: "...", why: "..."}] }

// Research
{ topic: "...", summary: "...", findings: [...], data_points: [...] }

// Code Review
{ code_summary: "...", vulnerabilities: [...], recommendations: [...] }
```

**Image Services** (5 services):
```javascript
// All image services
{ images: ["https://replicate.delivery/pbxt/..."] }
```

**Job Status Flow**:
- `pending` ‚Üí User hasn't paid yet
- `paid` ‚Üí Payment verified, AI processing started
- `completed` ‚Üí Results ready in output_data
- `failed` ‚Üí AI processing failed, error in output_data

**Key Files**:
- `src/hub.js:1393-1430` ‚Äî GET `/job/:uuid` route (job detail page)
- `src/hub.js:1409-1413` ‚Äî outputHtml generation (NEEDS ENHANCEMENT)
- `src/hub.js:12-103` ‚Äî HUB_STYLES (shared CSS)
- `src/hub.js:105-862` ‚Äî HUB_SCRIPTS (shared JS)

**Design Constraints**:
- No build process (direct HTML/CSS/JS)
- No external UI libraries
- Must work on mobile
- Keep page load fast

## Recent Work (Phases 1-4)

**Phase 1**: Environment setup
**Phase 2**: Payment verification, security
**Phase 3**: Payment ‚Üí AI text generation flow
**Phase 4**: Replicate image generation (‚úÖ complete)
- Added 5 image services
- Service type routing (text vs images)
- Image URLs stored in output_data

**Unblocked By Phase 4**:
- Have both text and image results to display
- Know format of output_data for each service type
- Can differentiate service types in UI

## Success Criteria

### Functional
- [ ] Text results formatted (not raw JSON)
- [ ] Images rendered with <img> tags
- [ ] Loading states while job processes
- [ ] Empty states for jobs without results
- [ ] Error states with clear messages
- [ ] Responsive on mobile devices

### User Experience
- [ ] Results easy to read and scan
- [ ] Images clickable to view full size
- [ ] Copy-to-clipboard for text results (optional)
- [ ] Download button for images (optional)
- [ ] Status indicators clear (pending, paid, completed, failed)

### Technical
- [ ] No breaking changes to existing pages
- [ ] Fast page load (no heavy libraries)
- [ ] Works without JavaScript (progressive enhancement)
- [ ] HTML escaping for security (XSS prevention)
</context>

<tasks>

## Task 1: Create Result Formatter Helper Function

**Objective**: Build a server-side function to format output_data into HTML

**Why First**: Centralize formatting logic, easier to maintain

**Implementation**:

**File**: `src/hub.js`

**Location**: After GET `/job/:uuid` route handler (around line 1390)

**Code to Add**:
```javascript
/**
 * Format job output_data into HTML for display
 * @param {Object} outputData - The job's output_data (parsed JSON)
 * @param {Object} job - The full job object (for context)
 * @returns {string} HTML string for display
 */
function formatJobResult(outputData, job) {
  if (!outputData) {
    // No results yet
    return `
      <div class="job-section" style="text-align: center; padding: 48px;">
        <p style="color: var(--text-muted); font-size: 18px;">‚è≥ Waiting for result...</p>
        <p style="color: var(--text-muted); font-size: 14px; margin-top: 8px;">
          ${job.status === 'paid' ? 'AI is processing your request...' : 'Payment pending'}
        </p>
      </div>
    `;
  }

  // Check if this is an error result
  if (outputData.error) {
    return `
      <div class="job-section" style="border-left: 4px solid #ef4444;">
        <h3 style="color: #ef4444;">‚ùå Error</h3>
        <p style="margin-top: 8px;"><strong>${outputData.error}</strong></p>
        ${outputData.message ? `<p style="color: var(--text-muted); margin-top: 8px;">${outputData.message}</p>` : ''}
      </div>
    `;
  }

  // Check if this is an image result
  if (outputData.images && Array.isArray(outputData.images)) {
    return formatImageResult(outputData.images);
  }

  // Format text result (structured data)
  return formatTextResult(outputData);
}

/**
 * Format image result with <img> tags
 */
function formatImageResult(images) {
  const imageHtml = images.map(url => `
    <div style="margin-bottom: 16px;">
      <img src="${url}" alt="Generated image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="margin-top: 8px; display: flex; gap: 8px;">
        <a href="${url}" target="_blank" class="btn" style="font-size: 14px;">üîó Open Full Size</a>
        <a href="${url}" download class="btn" style="font-size: 14px;">‚¨áÔ∏è Download</a>
      </div>
    </div>
  `).join('');

  return `
    <div class="job-section">
      <h3>üé® Generated Image${images.length > 1 ? 's' : ''}</h3>
      ${imageHtml}
    </div>
  `;
}

/**
 * Format text result (structured JSON data)
 */
function formatTextResult(data) {
  let html = '<div class="job-section"><h3>‚úÖ Result</h3>';

  // Format based on common field patterns
  if (data.ideas && Array.isArray(data.ideas)) {
    // Brainstorm format
    html += '<div class="result-list">';
    data.ideas.forEach((idea, i) => {
      html += `
        <div class="result-item">
          <h4>${i + 1}. ${idea.angle || 'Idea'}</h4>
          <p><strong>${idea.idea}</strong></p>
          ${idea.why ? `<p style="color: var(--text-muted); font-size: 14px;">üí° ${idea.why}</p>` : ''}
        </div>
      `;
    });
    html += '</div>';
  } else if (data.findings && Array.isArray(data.findings)) {
    // Research format
    if (data.summary) {
      html += `<p style="margin-bottom: 16px;"><strong>Summary:</strong> ${data.summary}</p>`;
    }
    html += '<div class="result-list"><h4>Key Findings:</h4>';
    data.findings.forEach(finding => {
      const findingText = typeof finding === 'string' ? finding : finding.finding;
      html += `<div class="result-item">‚Ä¢ ${findingText}</div>`;
    });
    html += '</div>';

    if (data.recommendations && data.recommendations.length > 0) {
      html += '<div class="result-list" style="margin-top: 16px;"><h4>Recommendations:</h4>';
      data.recommendations.forEach(rec => {
        html += `<div class="result-item">‚Ä¢ ${rec}</div>`;
      });
      html += '</div>';
    }
  } else if (data.output || data.tone) {
    // Copywriting format
    if (data.tone) {
      html += `<p style="color: var(--text-muted); font-size: 14px; margin-bottom: 8px;">Tone: ${data.tone}</p>`;
    }
    if (data.output) {
      html += `<p style="font-size: 16px; line-height: 1.6; margin-bottom: 16px;">${data.output}</p>`;
    }
    if (data.alternatives && data.alternatives.length > 0) {
      html += '<div class="result-list"><h4>Alternatives:</h4>';
      data.alternatives.forEach(alt => {
        html += `<div class="result-item">‚Ä¢ ${alt}</div>`;
      });
      html += '</div>';
    }
  } else if (data.main_takeaway) {
    // Summary format
    html += `<p style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">${data.main_takeaway}</p>`;
    if (data.key_points && data.key_points.length > 0) {
      html += '<div class="result-list"><h4>Key Points:</h4>';
      data.key_points.forEach(point => {
        html += `<div class="result-item">‚Ä¢ ${point}</div>`;
      });
      html += '</div>';
    }
  } else {
    // Fallback: pretty-print JSON
    html += '<pre style="background: var(--bg-card); padding: 16px; border-radius: 8px; overflow-x: auto; font-size: 13px; line-height: 1.5;">';
    html += JSON.stringify(data, null, 2);
    html += '</pre>';
  }

  html += '</div>';
  return html;
}
```

**Add CSS for result formatting** in HUB_STYLES:
```css
.result-list {
  margin-top: 16px;
}

.result-item {
  padding: 12px;
  margin-bottom: 8px;
  background: var(--bg-card);
  border-radius: 8px;
  border-left: 3px solid var(--accent);
}

.result-item h4 {
  margin: 0 0 8px 0;
  color: var(--accent);
  font-size: 16px;
}

.result-item p {
  margin: 4px 0;
}
```

**Verification**:
- Functions compile without errors
- HTML escaping for security (use simple escaping)

**Deliverable**:
- formatJobResult() function added
- formatImageResult() helper
- formatTextResult() helper
- CSS styles for results

**Commit**: `feat(05-01): add result formatting helper functions`

---

## Task 2: Update Job Detail Page to Use Formatter

**Objective**: Replace raw JSON dump with formatted result display

**Why Second**: Apply formatting to actual page

**Implementation**:

**File**: `src/hub.js`

**Location**: GET `/job/:uuid` route handler (around line 1409-1413)

**Current Code**:
```javascript
const outputHtml = job.output_data
  ? '<div class="job-section"><h3>‚úÖ Result</h3><pre style="white-space: pre-wrap; font-family: inherit;">' +
    (typeof job.output_data === 'string' ? job.output_data : JSON.stringify(job.output_data, null, 2)) +
    '</pre></div>'
  : '<div class="job-section" style="text-align: center; padding: 48px;"><p style="color: var(--text-muted);">‚è≥ Waiting for result...</p></div>';
```

**New Code**:
```javascript
const outputHtml = formatJobResult(job.output_data, job);
```

**That's it!** The formatter handles all cases.

**Verification**:
- Job page loads without errors
- Text results show formatted (not raw JSON)
- Image results show <img> tags
- Empty states show for jobs without results

**Deliverable**:
- Job detail page uses formatJobResult()
- Results display properly formatted

**Commit**: `feat(05-01): use result formatter in job detail page`

---

## Task 3: Add Loading States with Status Indicators

**Objective**: Show clear status indicators and loading states for jobs in progress

**Why Third**: Better UX while job processes

**Implementation**:

**File**: `src/hub.js`

**Location**: Job detail page header (around line 1474-1476)

**Enhance Status Badge**:

Current shows just status text. Add more context:

```javascript
// Current status badge
<span class="status-badge-lg" style="background: ${statusColor}; color: #1f2937;">
  ${job.status.toUpperCase()}
</span>

// Enhanced with icons and descriptions
function getStatusDisplay(job) {
  const statusInfo = {
    pending: { icon: '‚è≥', label: 'Pending Payment', desc: 'Waiting for payment confirmation' },
    paid: { icon: 'üîÑ', label: 'Processing', desc: 'AI is generating your result...' },
    completed: { icon: '‚úÖ', label: 'Completed', desc: 'Result ready' },
    failed: { icon: '‚ùå', label: 'Failed', desc: 'Processing error occurred' }
  };

  const info = statusInfo[job.status] || { icon: '‚ùì', label: job.status, desc: '' };

  return `
    <div class="status-badge-lg" style="background: ${statusColors[job.status] || '#f3f4f6'}; padding: 12px 16px; border-radius: 8px;">
      <div style="font-size: 20px; margin-bottom: 4px;">${info.icon}</div>
      <div style="font-weight: 600; color: #1f2937;">${info.label}</div>
      ${info.desc ? `<div style="font-size: 12px; color: #6b7280; margin-top: 4px;">${info.desc}</div>` : ''}
    </div>
  `;
}

// Use in page:
${getStatusDisplay(job)}
```

**Add Auto-Refresh for In-Progress Jobs**:

Add to HUB_SCRIPTS section or inline in job page:
```javascript
<script>
// Auto-refresh page if job is being processed
(function() {
  const jobStatus = '${job.status}';
  if (jobStatus === 'paid') {
    // Refresh every 3 seconds until completed
    setTimeout(() => {
      window.location.reload();
    }, 3000);
  }
})();
</script>
```

**Deliverable**:
- Enhanced status display with icons and descriptions
- Auto-refresh for jobs being processed
- Clear visual feedback for each status

**Commit**: `feat(05-01): add loading states and status indicators`

---

## Task 4: Add Empty State Improvements

**Objective**: Better empty states for jobs without results

**Why Fourth**: Handle edge cases gracefully

**Implementation**:

**Already handled in Task 1** formatJobResult() function:
```javascript
if (!outputData) {
  return `
    <div class="job-section" style="text-align: center; padding: 48px;">
      <p style="color: var(--text-muted); font-size: 18px;">‚è≥ Waiting for result...</p>
      <p style="color: var(--text-muted); font-size: 14px; margin-top: 8px;">
        ${job.status === 'paid' ? 'AI is processing your request...' : 'Payment pending'}
      </p>
    </div>
  `;
}
```

**Add Visual Polish**:

Add to empty state:
```javascript
if (!outputData) {
  return `
    <div class="job-section" style="text-align: center; padding: 48px;">
      <div style="font-size: 48px; margin-bottom: 16px;">
        ${job.status === 'paid' ? 'üîÑ' : '‚è≥'}
      </div>
      <p style="color: var(--text-muted); font-size: 18px; font-weight: 500; margin-bottom: 8px;">
        ${job.status === 'paid' ? 'AI is working on your request...' : 'Waiting for payment'}
      </p>
      <p style="color: var(--text-muted); font-size: 14px;">
        ${job.status === 'paid' ? 'This usually takes 5-30 seconds' : 'Complete payment to start processing'}
      </p>
      ${job.status === 'paid' ? '<p style="color: var(--text-muted); font-size: 14px; margin-top: 16px;">‚ö° Page will refresh automatically when complete</p>' : ''}
    </div>
  `;
}
```

**Verification**:
- Empty states look polished
- Clear messaging for each status
- Users know what to expect

**Deliverable**:
- Enhanced empty states
- Clear user guidance

**Commit**: `feat(05-01): enhance empty states with better messaging`

---

## Task 5: Add Dashboard Job List Formatting

**Objective**: Format job previews on dashboard

**Why Fifth**: Consistent formatting across all pages

**Implementation**:

**File**: `src/hub.js`

**Location**: GET `/dashboard` route (around line 1315-1380)

**Current Code** (shows job.output_data as JSON):
Find where jobs are listed on dashboard and add preview formatting.

**Enhance Job List Item**:
```javascript
// In dashboard job list loop
jobs.forEach(job => {
  const statusIcon = {
    pending: '‚è≥',
    paid: 'üîÑ',
    completed: '‚úÖ',
    failed: '‚ùå'
  }[job.status] || '‚ùì';

  const resultPreview = job.output_data
    ? (job.output_data.images
        ? `üé® ${job.output_data.images.length} image${job.output_data.images.length > 1 ? 's' : ''} generated`
        : (job.output_data.ideas
            ? `üí° ${job.output_data.ideas.length} ideas generated`
            : '‚úÖ Result ready'))
    : (job.status === 'paid' ? 'üîÑ Processing...' : '‚è≥ Pending');

  jobListHtml += `
    <a href="/job/${job.job_uuid}" class="job-card" style="display: block; text-decoration: none; color: inherit;">
      <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
        <div>
          <h3 style="margin: 0;">${job.skill_name}</h3>
          <p style="color: var(--text-muted); font-size: 14px; margin: 4px 0;">by ${job.agent_name}</p>
        </div>
        <span style="font-size: 20px;">${statusIcon}</span>
      </div>
      <p style="color: var(--text-muted); font-size: 14px; margin: 8px 0;">${resultPreview}</p>
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 12px; font-size: 13px; color: var(--text-muted);">
        <span>üí∞ $${Number(job.price_usdc).toFixed(2)}</span>
        <span>${new Date(job.created_at).toLocaleDateString()}</span>
      </div>
    </a>
  `;
});
```

**Verification**:
- Dashboard shows job previews
- Click through to see full results
- Status icons clear

**Deliverable**:
- Dashboard job list enhanced
- Result previews shown

**Commit**: `feat(05-01): add job previews to dashboard`

---

## Task 6: HTML Escaping for Security

**Objective**: Prevent XSS attacks by escaping user-generated content

**Why Sixth**: Security is critical

**Implementation**:

**File**: `src/hub.js`

**Add HTML Escape Function** (if not already exists from Phase 2):
```javascript
/**
 * Escape HTML to prevent XSS
 */
function escapeHtml(unsafe) {
  if (typeof unsafe !== 'string') return unsafe;
  return unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}
```

**Use in Formatters**:
```javascript
// In formatTextResult and formatImageResult
// Escape user data before inserting into HTML
html += `<p>${escapeHtml(idea.idea)}</p>`;
html += `<div class="result-item">${escapeHtml(finding)}</div>`;
```

**Check Image URLs** (basic validation):
```javascript
function formatImageResult(images) {
  // Validate URLs are HTTPS
  const validImages = images.filter(url =>
    typeof url === 'string' && url.startsWith('https://')
  );

  if (validImages.length === 0) {
    return '<div class="job-section"><p style="color: var(--text-muted);">No valid images to display</p></div>';
  }

  const imageHtml = validImages.map(url => `
    <div style="margin-bottom: 16px;">
      <img src="${escapeHtml(url)}" alt="Generated image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      ...
    </div>
  `).join('');
  ...
}
```

**Verification**:
- User input escaped
- No XSS vulnerabilities
- Image URLs validated

**Deliverable**:
- HTML escaping implemented
- XSS prevention

**Commit**: `fix(05-01): add HTML escaping for XSS prevention`

---

</tasks>

<verification>

## Pre-Execution Checklist

Before starting implementation:
- [ ] Phase 4 complete (image generation working)
- [ ] Jobs have output_data with various formats
- [ ] Server starts without errors
- [ ] Can access job detail pages

## Post-Task Checkpoints

### After Task 1 (Formatter Functions)
- [ ] formatJobResult() function added
- [ ] formatImageResult() helper added
- [ ] formatTextResult() helper added
- [ ] CSS styles added for results
- [ ] Functions compile without errors

### After Task 2 (Job Detail Page)
- [ ] Job detail page uses formatter
- [ ] Text results show formatted (not raw JSON)
- [ ] Image results show <img> tags
- [ ] Empty states work

### After Task 3 (Loading States)
- [ ] Status indicators enhanced
- [ ] Auto-refresh for processing jobs
- [ ] Clear visual feedback

### After Task 4 (Empty States)
- [ ] Empty states polished
- [ ] Clear messaging
- [ ] User guidance provided

### After Task 5 (Dashboard)
- [ ] Dashboard shows job previews
- [ ] Result summaries displayed
- [ ] Status icons shown

### After Task 6 (Security)
- [ ] HTML escaping implemented
- [ ] XSS prevention verified
- [ ] Image URLs validated

## Final Verification Commands

```bash
# 1. Server starts successfully
npm start
# Expected: "Server running on port 7378"

# 2. Visit job detail page
curl http://localhost:7378/job/[some-job-uuid]
# Expected: HTML with formatted results

# 3. Check for XSS prevention
# Create job with prompt: <script>alert('xss')</script>
# Expected: Text escaped, no script execution

# 4. Check image display
# View job with image result
# Expected: <img> tag rendered, image visible
```

## Success Criteria (Final)

All must be true:
- [ ] Text results formatted (not raw JSON)
- [ ] Images rendered with <img> tags
- [ ] Loading states while job processes
- [ ] Empty states for jobs without results
- [ ] Error states with clear messages
- [ ] Dashboard shows job previews
- [ ] HTML escaping prevents XSS
- [ ] No breaking changes to existing pages

</verification>

<success_criteria>

## Phase 5 Complete When:

### Functional Requirements ‚úÖ
1. **Rich Result Display**:
   - Text results show structured fields (not raw JSON)
   - Images displayed with <img> tags
   - Results easy to read and scan

2. **Status Handling**:
   - Loading states while job processes
   - Empty states for jobs without results
   - Error states with clear messages
   - Auto-refresh for in-progress jobs

3. **User Experience**:
   - Dashboard shows job previews
   - Status indicators clear
   - Click through from dashboard to full results

### Technical Requirements ‚úÖ
1. **Code Quality**:
   - Formatting logic centralized in helper functions
   - HTML escaping for security
   - No breaking changes to existing pages

2. **Performance**:
   - Fast page load (no heavy libraries)
   - Works without JavaScript (progressive enhancement)
   - Responsive on mobile

3. **Security**:
   - XSS prevention via HTML escaping
   - Image URL validation (HTTPS only)
   - No script injection possible

### Visual Requirements ‚úÖ
1. **Formatting**:
   - Lists and bullet points
   - Headings and structure
   - Color coding for different elements
   - Proper spacing and typography

2. **Images**:
   - Full width on mobile
   - Rounded corners and shadows
   - Click to open full size
   - Download button

## Unblocks

Phase 5 completion unblocks:
- ‚úÖ **Phase 8**: Mobile Responsive & UI Polish (formatting foundation ready)
- ‚úÖ **Phase 12**: End-to-End Testing (can test full user journey)
- ‚úÖ Demo-ready UI (can showcase to users)

## Not In Scope (Deferred)

These are explicitly NOT part of Phase 5:
- ‚ùå Real-time updates (websockets)
- ‚ùå Copy-to-clipboard buttons (nice-to-have)
- ‚ùå Image lightbox/modal viewer (simple link works)
- ‚ùå Markdown rendering library (simple formatting only)
- ‚ùå Syntax highlighting for code blocks
- ‚ùå Export to PDF or other formats
- ‚ùå Social sharing buttons

</success_criteria>

<output>

## Deliverables

### Code Files Modified
1. **src/hub.js** ‚Äî Result display formatting
   - formatJobResult() function added
   - formatImageResult() helper
   - formatTextResult() helper
   - HTML escaping function
   - Enhanced status display
   - Auto-refresh for in-progress jobs
   - Dashboard job previews

2. **CSS Styles** (in HUB_STYLES)
   - .result-list styles
   - .result-item styles
   - Status badge enhancements

### User Experience Improvements
- Text results: Structured display instead of raw JSON
- Image results: Rendered images with download links
- Loading states: Clear indicators during processing
- Empty states: Helpful messaging
- Error states: Clear error display

### Security Enhancements
- HTML escaping for all user content
- Image URL validation (HTTPS only)
- XSS prevention

## Files to Commit

```bash
git add src/hub.js
git commit -m "feat(05-01): add result formatting helper functions

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

git add src/hub.js
git commit -m "feat(05-01): use result formatter in job detail page

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

git add src/hub.js
git commit -m "feat(05-01): add loading states and status indicators

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

git add src/hub.js
git commit -m "feat(05-01): enhance empty states with better messaging

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

git add src/hub.js
git commit -m "feat(05-01): add job previews to dashboard

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

git add src/hub.js
git commit -m "fix(05-01): add HTML escaping for XSS prevention

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
```

## Next Phase Preview

After Phase 5 completion, proceed to:

**Phase 6: Agent Webhook System**
- POST to agent.webhook_url when jobs are paid
- Retry logic (3 attempts with exponential backoff)
- Timeout handling (30s per HTTP request)
- Enable multi-agent marketplace

**To start**: `/gsd:plan-phase 6`

</output>

---

**Estimated Time**: 1.5-2 hours
**Complexity**: Low-Medium (frontend work)
**Risk Level**: Low (UI-only changes, no backend logic)
**Dependencies**: Phase 4 complete (have results to display)

**Budget Impact**:
- Development: $0 (no API calls)
- Pure frontend work
- No external dependencies

---

*Plan created: 2026-02-03*
*Phase: 5 of 13*
*Mode: YOLO (auto-execute)*
